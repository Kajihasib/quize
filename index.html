<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Quiz</title>
		<link rel="stylesheet" href="assets/css/style.css" />
	</head>
	<body>
		<!-- header area start  -->
		<header class="header_area">
			<a class="logo" href="index.html">
				<img src="assets/images/logo.png" alt="logo" />
			</a>
		</header>
		<!-- header area end  -->
		<div class="hero_area">
			<h1>Football Quiz</h1>

			<p>
				Love football as much as we do? Then take this quiz to test your knowledge! <br />
				Make sure to read the rulebook before you start
			</p>
		</div>
		<div class="quiz_area">
			<div class="quiz_form">
				<div class="input_field">
					<input id="name" type="text" placeholder="Enter your name to start" />
					<p id="error_message"></p>
				</div>
				<button onclick="start_quiz()" id="submit_btn">Start Quiz</button>
				<h5 class="rouls_title">Rules:</h5>
				<ul class="rules">
					<li><strong>Questions:</strong> 10</li>
					<li><strong>Timer:</strong> 1 Minute</li>
					<li><strong>Correct Answer:</strong> 2 Points</li>
					<li><strong>Incorrect Answer:</strong> -1 Point</li>
				</ul>
			</div>
			<div class="start_quize_wrap">
				<div class="start_quize-top">
					<h3>10 Quiz Questions:</h3>
					<span><span id="time">0:00 </span> Minute </span>
				</div>
				<div id="start_quize"></div>
				<button id="submit_quiz" onclick="question_submit()" class="submit_btn">Submit</button>
			</div>
			<div class="quiz_result">
				<span class="result_card"
					><span id="expression"></span> <span id="user_name"></span>! You got
					<span id="user_point"></span>/20</span
				>
				<ul class="ansr_list">
					<li class="text-success">Q1: Correct</li>
					<li class="text-error">Q2: Incorrect</li>
				</ul>
				<!-- <a href="index.html" class="submit_btn">Start again</a> -->
			</div>
		</div>

		<footer class="footer_area">
			<ul class="footer_menu">
				<li><a href="student.html">Student Details</a></li>
			</ul>
		</footer>
		<button class="scroll_up" onclick='window.scrollTo({top: 0, behavior: "smooth"});'>Top</button>

		<script>
			// Hiding Question And Result Section
			document.getElementsByClassName('start_quize_wrap')[0].style.display = 'none';
			document.getElementsByClassName('quiz_result')[0].style.display = 'none';

			function start_quiz() {
				var name = document.getElementById('name');
				document.getElementById('error_message').style.display = 'none';

				if (name.value === '') {
					name.classList.add('error');
					document.getElementById('error_message').textContent = 'name can not be empty';
					document.getElementById('error_message').style.display = '';
				} else {
					name.classList.remove('error');
					document.getElementById('error_message').style.display = 'none';
					// starting Time
					let oneMinutes = 60 * 1,
						display = document.querySelector('#time');
					startTimer(oneMinutes, display);
					// Hiding name section and question section showing
					document.getElementsByClassName('start_quize_wrap')[0].style.display = '';
					document.getElementsByClassName('quiz_form')[0].style.display = 'none';
				}
			}

			// when click submit quiz then fire this question
			function question_submit() {
				onTimeFinish();
			}

			// Time Controlling function
			function startTimer(duration, display) {
				let timer = duration,
					minutes,
					seconds;
				var intervalINT = setInterval(function () {
					minutes = parseInt(timer / 60, 10);
					seconds = parseInt(timer % 60, 10);

					minutes = minutes < 10 ? '0' + minutes : minutes;
					seconds = seconds < 10 ? '0' + seconds : seconds;

					display.textContent = minutes + ':' + seconds;

					if (--timer < 0) {
						//after finishing time
						onTimeFinish();
						clearInterval(intervalINT);
					}
				}, 1000);
			}

			// Question List
			let question_items = [
				{
					id: 1,
					title: 'many minutes are in a full game of football?',
					correct_answer: 'minutes90',
					answer: [
						{
							id: 1,
							value: 'minutes45',
							name: '45 Minutes',
						},
						{
							id: 2,
							value: 'minutes60',
							name: '60 Minutes',
						},
						{
							id: 3,
							value: 'minutes90',
							name: '90 Minutes',
						},
						{
							id: 4,
							value: 'minutes100',
							name: '100 Minutes',
						},
					],
				},
				{
					id: 2,
					title: 'How many teams are in the Premier League?',
					correct_answer: 'teams20',
					answer: [
						{
							id: 1,
							value: 'teams20',
							name: '20 Teams',
						},
						{
							id: 2,
							value: 'teams22',
							name: '22 Teams',
						},
						{
							id: 3,
							value: 'teams24',
							name: '24 Teams',
						},
						{
							id: 4,
							value: 'teams26',
							name: '26 Teams',
						},
					],
				},
				{
					id: 3,
					title: 'Who is the all-time top scorer in the Premier League?',
					correct_answer: 'alan_shearer',
					answer: [
						{
							id: 1,
							value: 'sergio_aguero',
							name: 'Sergio Aguero',
						},
						{
							id: 2,
							value: 'cristiano_ronaldo',
							name: 'Cristiano Ronaldo',
						},
						{
							id: 3,
							value: 'thierry_henry',
							name: 'Thierry Henry',
						},
						{
							id: 4,
							value: 'alan_shearer',
							name: 'Alan Shearer',
						},
					],
				},
				{
					id: 4,
					title: 'Which team one of the 2019/20 Premier League title?',
					correct_answer: 'liverpool',
					answer: [
						{
							id: 1,
							value: 'chelsea',
							name: 'Chelsea',
						},
						{
							id: 2,
							value: 'manchester_city',
							name: 'Manchester City',
						},
						{
							id: 3,
							value: 'liverpool',
							name: 'Liverpool',
						},
						{
							id: 4,
							value: 'manchester_united',
							name: 'Manchester United',
						},
					],
				},
				{
					id: 5,
					title: 'Which country won the first ever World Cup in 1930?',
					correct_answer: 'uruguay',
					answer: [
						{
							id: 1,
							value: 'england',
							name: 'England',
						},
						{
							id: 2,
							value: 'brazil',
							name: 'Brazil',
						},
						{
							id: 3,
							value: 'france',
							name: 'France',
						},
						{
							id: 4,
							value: 'uruguay',
							name: 'Uruguay',
						},
					],
				},
				{
					id: 6,
					title: 'Which country hosted the 2014 World Cup?',
					correct_answer: 'brazil',
					answer: [
						{
							id: 2,
							value: 'brazil',
							name: 'Brazil',
						},
						{
							id: 1,
							value: 'russia',
							name: 'Russia',
						},
						{
							id: 3,
							value: 'south_africa',
							name: 'South Africa',
						},
						{
							id: 4,
							value: 'uruguay',
							name: 'Uruguay',
						},
					],
				},
				{
					id: 7,
					title: 'Which country won the 2018 World Cup?',
					correct_answer: 'france',
					answer: [
						{
							id: 2,
							value: 'brazil',
							name: 'Brazil',
						},
						{
							id: 1,
							value: 'portugal',
							name: 'Portugal',
						},
						{
							id: 3,
							value: 'england',
							name: 'England',
						},
						{
							id: 4,
							value: 'france',
							name: 'France',
						},
					],
				},
				{
					id: 8,
					title: 'Which club has won the Champions League titles?',
					correct_answer: 'real_madrid',
					answer: [
						{
							id: 2,
							value: 'manchester_united',
							name: 'Manchester United',
						},
						{
							id: 1,
							value: 'real_madrid',
							name: 'Real Madrid',
						},
						{
							id: 3,
							value: 'barcelona',
							name: 'Barcelona',
						},
						{
							id: 4,
							value: 'bayern_munich',
							name: 'Bayern Munich ',
						},
					],
				},
				{
					id: 9,
					title: 'Which football player has the biggest following on Instagram?',
					correct_answer: 'cristiano_ronaldo',
					answer: [
						{
							id: 2,
							value: 'lionel_messi',
							name: 'Lionel Messi',
						},
						{
							id: 1,
							value: 'neymar',
							name: 'Neymar',
						},
						{
							id: 3,
							value: 'eden_hazard',
							name: 'Eden Hazard',
						},
						{
							id: 4,
							value: 'cristiano_ronaldo',
							name: 'Cristiano Ronaldo ',
						},
					],
				},
				{
					id: 10,
					title: 'Which football team does Zlatan IbrahimoviÄ‡ currently play for?',
					correct_answer: 'ac_milan',
					answer: [
						{
							id: 2,
							value: 'ac_milan',
							name: 'AC Milan',
						},
						{
							id: 1,
							value: 'manchester_united',
							name: 'Manchester United',
						},
						{
							id: 3,
							value: 'juventus',
							name: 'Juventus ',
						},
						{
							id: 4,
							value: 'barcelona',
							name: 'Barcelona',
						},
					],
				},
			];

			let answerList = [];

			let question_html = '';

			// Making question List
			question_items.forEach(function (item, index) {
				index = index + 1;
				document.getElementById('start_quize').insertAdjacentHTML('beforeend', getQuestion(item, index));
			});

			//Question making function
			function getQuestion(qsdata, index) {
				let optionsHtml = '';
				qsdata.answer.forEach(function (option, key) {
					optionsHtml =
						optionsHtml +
						`<li onclick="getRadioValue(${index}, '${option.value}')">
							<input type="radio" id="${index + option.value}" name="${index}" />
							<label for="${index + option.value}">${option.name}</label>
						</li>`;
				});
				return `<div class="quiz_wrap">
						<h4>
							<span class="label">${index}</span>
							${qsdata.title}
						</h4>
						<ul class="quiz_ansr-list">${optionsHtml}</ul>
					</div>`;
			}

			// getting radio button value
			function getRadioValue(parent, value) {
				var selected = question_items.find((e) => e.id === parent);
				if (selected.correct_answer === value) {
					answerList[parent] = true;
				}
			}

			// After Finishing time, then call it
			function onTimeFinish() {
				var point = 0;
				var remain = 10;
				// calculation point
				for (var i = 0; i < answerList.length; i++) {
					if (answerList[i]) {
						point = point + 2;
						remain = remain - 1;
					}
				}
				point = point - remain;
				// making expression text
				var expression =
					point > 5 ? (point > 14 ? (point > 19 ? 'Perfect' : 'Well Done') : 'Nice Try') : 'Unlucky';
				//setting bg color
				var bg_color =
					point > 5 ? (point > 14 ? (point > 19 ? 'bg-gold' : 'bg-success') : 'bg-warning') : 'bg-error';

				//setting result text
				document.getElementById('user_point').textContent = point;
				document.getElementById('expression').textContent = expression;
				document.getElementsByClassName('result_card')[0].classList.add(bg_color);
				document.getElementById('user_name').textContent = document.getElementById('name').value;

				// hiding question and showing result
				document.getElementsByClassName('start_quize_wrap')[0].style.display = 'none';
				document.getElementsByClassName('quiz_result')[0].style.display = '';
			}
		</script>
	</body>
</html>
